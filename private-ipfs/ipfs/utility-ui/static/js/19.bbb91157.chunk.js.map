{"version":3,"sources":["../node_modules/countly-sdk-web/lib/countly.js"],"names":["root","window","this","Countly","lastBeat","platform","startTime","SDK_VERSION","SDK_NAME","inited","sessionStarted","apiPath","beatInterval","queueSize","requestQueue","eventQueue","remoteConfigs","crashLogs","timedEvents","ignoreReferrers","crashSegments","autoExtend","storedDuration","lastView","lastViewTime","lastViewStoredDuration","failTimeout","failTimeoutAmount","inactivityTime","inactivityCounter","sessionUpdate","maxEventBatch","maxCrashLogs","useSessionCookie","sessionCookieTimeout","lastMsTs","readyToProcess","hasPulse","offlineMode","syncConsents","lastParams","urlParseRE","searchBotRE","trackTime","features","consentTimer","consents","i","length","init","ob","namespace","getConfig","getTimestamp","store","ignore_prefetch","debug","app_key","test_mode","device_id","getId","url","stripTrailingSlash","app_version","country_code","city","ip_address","ignore_bots","force_post","remote_config","q","onload","ignore_visitor","require_consent","ignore_referrers","Array","isArray","log","checkIgnore","name","indexOf","passed_data","JSON","parse","replace","ex","location","hash","token","purpose","setToken","showLoader","loadJS","hideLoader","constructor","utm","search","parts","substring","split","utms","hasUTM","nv","tag","userData","set","unset","save","heartBeat","notifyLoaders","fetch_remote_config","group_features","check_consent","feature","optin","check_any_consent","add_consent","updateConsent","setTimeout","begin_session","apply","track_pageview","change_id","remove_consent","clearTimeout","hasAnyProperties","toRequestQueue","consent","stringify","add_cly_events","event","key","count","e","getProperties","timestamp","getMsTimestamp","date","Date","hour","getHours","dow","getDay","push","enable_offline_mode","disable_offline_mode","needResync","noHeartBeat","force","expire","parseInt","req","metrics","getMetrics","arguments","session_duration","sec","extendSession","end_session","reportViewDuration","newId","merge","events","oldId","old_device_id","add_event","start_event","end_event","dur","user_details","user","report_conversion","campaign_id","campaign_user_id","campaign_user","customData","change_custom_property","value","mod","document","visibilityState","test","navigator","userAgent","getMultiSelectValues","input","values","options","j","selected","join","processWidget","currentWidget","hasSticker","wrapper","createElement","className","id","_id","closeIcon","innerHTML","iframe","src","body","appendChild","getElementById","style","display","sticker","color","trigger_font_color","backgroundColor","trigger_bg_color","trigger_position","trigger_button_text","smileySvg","fill","segments","prepareRequest","request","sdk_name","sdk_version","shift","slice","userdata","last","splice","params","sendXmlHttpRequest","err","unshift","generateUUID","d","getTime","c","r","Math","random","floor","toString","_app_version","_ua","screen","width","height","devicePixelRatio","round","abs","orientation","temp","_resolution","_density","locale","language","browserLanguage","systemLanguage","userLanguage","_locale","referrer","matches","exec","hostname","ignoring","k","RegExp","_store","console","prototype","call","ts","override","recordError","nonfatal","error","stack","message","fileName","lineNumber","columnNumber","_error","_run","battery","webkitBattery","mozBattery","msBattery","_bat","level","onLine","_online","_background","hasFocus","_logs","_nonfatal","_view","pathname","_custom","gl","getContext","_opengl","getParameter","VERSION","crash","callback","xhr","XMLHttpRequest","ActiveXObject","data","prepareParams","method","open","setRequestHeader","onreadystatechange","readyState","status","responseText","send","str","encodeURIComponent","substr","orig","props","prop","set_once","increment","increment_by","multiply","max","min","push_unique","pull","custom","track_errors","onerror","msg","line","col","errorCharacter","f","callee","caller","addEventListener","Error","reason","log_error","add_log","record","keys","omit_keys","configs","get_remote_config","stop_time","start_time","track_sessions","hidden","onchange","resetInactivity","setInterval","page","ignoreList","getViewName","reg","getViewUrl","start","track_view","track_clicks","parent","shouldProcess","get_page_coord","pageX","pageY","getDocHeight","getDocWidth","track_scrolls","scrollY","processScrollView","viewportHeight","getViewportHeight","scrollTop","documentElement","track_links","elem","get_event_target","closest","href","innerText","track_forms","trackHidden","getInputName","type","nodeName","form","segmentation","action","elements","toLowerCase","multiple","selectedIndex","checked","collect_from_forms","useCustom","hasUserInfo","labelData","labels","getElementsByTagName","htmlFor","textContent","classes","email","username","phone","organization","collect_from_facebook","FB","api","resp","gender","birthday","byear","pop","work","employer","get","opt_out","opt_in","show_feedback_popup","widget_id","JSONParseError","enable_feedback","loadCSS","enableWidgets","popups","widgets","insertAdjacentHTML","is_active","target_devices","detect_device","device","hide_sticker","target_page","pages","target_pages","Element","el","toUpperCase","parentElement","element","listener","attachEvent","target","srcElement","b","a","detect","isMobile","clientX","scrollLeft","clientY","D","scrollHeight","offsetHeight","clientHeight","scrollWidth","offsetWidth","clientWidth","innerHeight","Object","hasOwnProperty","storageOnly","lsSupport","localStorage","setItem","serialize","createCookie","getItem","nameEQ","ca","cookie","charAt","readCookie","deserialize","exp","setTime","expires","toGMTString","removeItem","loadFile","attr","loaded","fileref","setAttribute","js","css","loader","head","styleSheet","cssText","createTextNode","newValue","_internals","isUUID","getLastView","getToken","getRequestQueue","getEventQueue","clearQueue","factory"],"mappings":"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","file":"static/js/19.bbb91157.chunk.js","sourcesContent":["/************\n* Countly Web SDK\n* https://github.com/Countly/countly-sdk-web\n************/\n\n/**\n * Countly object to manage the internal queue and send requests to Countly server. More information on {@link http://resources.count.ly/docs/countly-sdk-for-web}\n * @name Countly\n * @global\n * @namespace Countly\n * @example <caption>SDK integration</caption>\n * <script type=\"text/javascript\">\n *   \n * //some default pre init\n * var Countly = Countly || {};\n * Countly.q = Countly.q || [];\n * \n * //provide your app key that you retrieved from Countly dashboard\n * Countly.app_key = \"YOUR_APP_KEY\";\n * \n * //provide your server IP or name. Use try.count.ly for EE trial server.\n * //if you use your own server, make sure you have https enabled if you use\n * //https below.\n * Countly.url = \"https://yourdomain.com\"; \n * \n * //start pushing function calls to queue\n * //track sessions automatically\n * Countly.q.push([\"track_sessions\"]);\n *   \n * //track sessions automatically\n * Countly.q.push([\"track_pageview\"]);\n *   \n * //load countly script asynchronously\n * (function() {\n *  var cly = document.createElement(\"script\"); cly.type = \"text/javascript\"; \n *  cly.async = true;\n *  //enter url of script here\n *  cly.src = \"https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js\";\n *  cly.onload = function(){Countly.init()};\n *  var s = document.getElementsByTagName(\"script\")[0]; s.parentNode.insertBefore(cly, s);\n * })();\n * </script>\n */\n(function (root, factory) {\n    if(typeof define === \"function\" && define.amd) {\n        define([], function(){ return factory(root.Countly);});\n    } else if(typeof module === \"object\" && module.exports) {\n        module.exports = factory(root.Countly);\n    } else {\n        root.Countly = factory(root.Countly);\n    }\n}(typeof window !== \"undefined\" ? window : this, function (Countly) {\n    \"use strict\";\n    /** @lends Countly */\n    Countly = Countly || {};\n    var SDK_VERSION = \"19.08\";\n    var SDK_NAME = \"javascript_native_web\";\n\n    var inited = false,\n        sessionStarted = false,\n        apiPath = \"/i\",\n        readPath = \"/o/sdk\",\n        beatInterval = 500,\n        queueSize = 1000,\n        requestQueue = [],\n        eventQueue = [],\n        remoteConfigs = {},\n        crashLogs = [],\n        timedEvents = {},\n        ignoreReferrers = [],\n        crashSegments = null,\n        autoExtend = true,\n        lastBeat,\n        storedDuration = 0,\n        lastView = null,\n        lastViewTime = 0,\n        lastViewStoredDuration = 0,\n        failTimeout = 0,\n        failTimeoutAmount = 60,\n        inactivityTime = 20,\n        inactivityCounter = 0,\n        sessionUpdate = 60,\n        maxEventBatch = 10,\n        maxCrashLogs = 100,\n        useSessionCookie = true,\n        sessionCookieTimeout = 30,\n        lastMsTs = 0,\n        readyToProcess = true,\n        platform,\n        hasPulse = false,\n        offlineMode = false,\n        syncConsents = {},\n        lastParams = {},\n        urlParseRE = /^(((([^:\\/#\\?]+:)?(?:(\\/\\/)((?:(([^:@\\/#\\?]+)(?:\\:([^:@\\/#\\?]+))?)@)?(([^:\\/#\\?\\]\\[]+|\\[[^\\/\\]@#?]+\\])(?:\\:([0-9]+))?))?)?)?((\\/?(?:[^\\/\\?#]+\\/+)*)([^\\?#]*)))?(\\?[^#]+)?)(#.*)?/,\n        searchBotRE = /(CountlySiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome)/,\n        trackTime = true,\n        startTime;\n\n    \n\n    /**\n     * Array with list of available features that you can require consent for\n     */\n    Countly.features = [\"sessions\", \"events\", \"views\", \"scrolls\", \"clicks\", \"forms\", \"crashes\", \"attribution\", \"users\", \"star-rating\", \"location\"];\n\n    //create object to store consents\n    var consents = {};\n    for (var i = 0; i < Countly.features.length; i++) {\n        consents[Countly.features[i]] = {};\n    }\n\n    /**\n     * Initialize Countly object\n     * @param {Object} conf - Countly initialization {@link Init} object with configuration options\n     * @param {string} conf.app_key - app key for your app created in Countly\n     * @param {string} conf.device_id - to identify a visitor, will be auto generated if not provided\n     * @param {string} conf.url - your Countly server url, you can use your server URL or IP here\n     * @param {string} [conf.app_version=0.0] - the version of your app or website\n     * @param {string=} conf.country_code - country code for your visitor\n     * @param {string=} conf.city - name of the city of your visitor\n     * @param {string=} conf.ip_address - ip address of your visitor\n     * @param {boolean} [conf.debug=false] - output debug info into console\n     * @param {boolean} [conf.ignore_bots=true] - option to ignore traffic from bots\n     * @param {number} [conf.interval=500] - set an interval how often to check if there is any data to report and report it in miliseconds\n     * @param {number} [conf.queue_size=1000] - maximum amount of queued requests to store\n     * @param {number} [conf.fail_timeout=60] - set time in seconds to wait after failed connection to server in seconds\n     * @param {number} [conf.inactivity_time=20] - after how many minutes user should be counted as inactive, if he did not perform any actions, as mouse move, scroll or keypress\n     * @param {number} [conf.session_update=60] - how often in seconds should session be extended\n     * @param {number} [conf.max_events=10] - maximum amount of events to send in one batch\n     * @param {number} [conf.max_logs=100] - maximum amount of breadcrumbs to store for crash logs\n     * @param {array=} conf.ignore_referrers - array with referrers to ignore\n     * @param {boolean} [conf.ignore_prefetch=true] - ignore prefetching and pre rendering from counting as real website visits\n     * @param {boolean} [conf.force_post=false] - force using post method for all requests\n     * @param {boolean} [conf.ignore_visitor=false] - ignore this current visitor\n     * @param {boolean} [conf.require_consent=false] - Pass true if you are implementing GDPR compatible consent management. It would prevent running any functionality without proper consent\n     * @param {boolean} [conf.utm={\"source\":true, \"medium\":true, \"campaign\":true, \"term\":true, \"content\":true}] - Object instructing which UTM parameters to track\n     * @param {boolean} [conf.use_session_cookie=true] - Use cookie to track session\n     * @param {number} [conf.session_cookie_timeout=30] - How long till cookie session should expire in minutes\n     * @param {boolean|function} [conf.remote_config=false] - Enable automatic remote config fetching, provide callback function to be notified when fetching done\n     * @param {string=} [conf.namespace=\"\"] - Have separate namespace of of persistant data\n     * @example\n     * Countly.init({\n     *   //provide your app key that you retrieved from Countly dashboard\n     *   app_key: \"YOUR_APP_KEY\",\n     *   //provide your server IP or name. Use try.count.ly for EE trial server.\n     *   url: \"http://yourdomain.com\" \n     * });\n     */\n    Countly.init = function (ob) {\n        if (!inited) {\n            ob = ob || {};\n            Countly.namespace = getConfig(\"namespace\", ob, \"\");\n            startTime = getTimestamp();\n            inited = true;\n            requestQueue = store(\"cly_queue\") || [];\n            timedEvents = {};\n            eventQueue = store(\"cly_event\") || [];\n            remoteConfigs = store(\"cly_remote_configs\") || {};\n            beatInterval = getConfig(\"interval\", ob, beatInterval);\n            queueSize = getConfig(\"queue_size\", ob, queueSize);\n            offlineMode = getConfig(\"offline_mode\", ob, offlineMode);\n            failTimeoutAmount = getConfig(\"fail_timeout\", ob, failTimeoutAmount);\n            inactivityTime = getConfig(\"inactivity_time\", ob, inactivityTime);\n            sessionUpdate = getConfig(\"session_update\", ob, sessionUpdate);\n            maxEventBatch = getConfig(\"max_events\", ob, maxEventBatch);\n            maxCrashLogs = getConfig(\"max_logs\", ob, maxCrashLogs);\n            useSessionCookie = getConfig(\"use_session_cookie\", ob, useSessionCookie);\n            sessionCookieTimeout = getConfig(\"session_cookie_timeout\", ob, sessionCookieTimeout);\n            Countly.ignore_prefetch = getConfig(\"ignore_prefetch\", ob, true);\n            Countly.debug = getConfig(\"debug\", ob, false);\n            Countly.app_key = getConfig(\"app_key\", ob, null);\n            Countly.test_mode = getConfig(\"test_mode\", ob, false);\n            if (!offlineMode) {\n                Countly.device_id = getConfig(\"device_id\", ob, getId());\n            }\n            else if (!Countly.device_id) {\n                Countly.device_id = \"[CLY]_temp_id\";\n            }\n            Countly.url = stripTrailingSlash(getConfig(\"url\", ob, \"\"));\n            Countly.app_version = getConfig(\"app_version\", ob, \"0.0\");\n            Countly.country_code = getConfig(\"country_code\", ob, null);\n            Countly.city = getConfig(\"city\", ob, null);\n            Countly.ip_address = getConfig(\"ip_address\", ob, null);\n            Countly.ignore_bots = getConfig(\"ignore_bots\", ob, true);\n            Countly.force_post = getConfig(\"force_post\", ob, false);\n            Countly.remote_config = getConfig(\"remote_config\", ob, false);\n            Countly.q = Countly.q || [];\n            Countly.onload = Countly.onload || [];\n            Countly.ignore_visitor = getConfig(\"ignore_visitor\", ob, false);\n            Countly.require_consent = getConfig(\"require_consent\", ob, false);\n            if (ob.ignore_referrers && Array.isArray( ob.ignore_referrers ) ) {\n                ignoreReferrers = ob.ignore_referrers;\n            }\n            else if (Countly.ignore_referrers && Array.isArray( Countly.ignore_referrers ) ) {\n                ignoreReferrers = Countly.ignore_referrers;\n            }\n\n            if (Countly.url === \"\") {\n                log(\"Please provide server URL\");\n                Countly.ignore_visitor = true;\n            }\n            if (store(\"cly_ignore\")) {\n                //opted out user\n                Countly.ignore_visitor = true;\n            }\n            \n            checkIgnore();\n            \n            if (window.name && window.name.indexOf(\"cly:\") === 0) {\n                try{\n                    Countly.passed_data = JSON.parse(window.name.replace(\"cly:\", \"\"));\n                } catch(ex){log(\"Could not parse name\", window.name);}\n            }\n            else if (location.hash && location.hash.indexOf(\"#cly:\") === 0) {\n                try{\n                    Countly.passed_data = JSON.parse(location.hash.replace(\"#cly:\", \"\"));\n                } catch(ex){log(\"Could not parse hash\", location.hash);}\n            }\n\n            if (Countly.passed_data) {\n                if (Countly.passed_data.token && Countly.passed_data.purpose) {\n                    if (Countly.passed_data.token !== store(\"cly_old_token\")) {\n                        setToken(Countly.passed_data.token);\n                        store(\"cly_old_token\", Countly.passed_data.token);\n                    }\n                    if (Countly.passed_data.purpose === \"heatmap\") {\n                        Countly.ignore_visitor = true;\n                        showLoader();\n                        loadJS(Countly.url + \"/views/heatmap.js\", hideLoader);\n                    }\n                }\n            }\n\n            if (!Countly.ignore_visitor) {\n                log(\"Countly initialized\");\n                //let code waiting for us to load, know that we have loaded\n                if (Countly.onload.constructor !== Array) {\n                    Countly.onload = [];\n                }\n\n                if (Countly.q.constructor !== Array) {\n                    Countly.q = [];\n                }\n                \n                var i = 0;\n                Countly.utm = Countly.utm || {\"source\":true, \"medium\":true, \"campaign\":true, \"term\":true, \"content\":true};\n                \n                if (location.search) {\n                    var parts = location.search.substring(1).split(\"&\");\n                    var utms = {};\n                    var hasUTM = false;\n                    for (i = 0; i < parts.length; i++) {\n                        var nv = parts[i].split(\"=\");\n                        if (nv[0] === \"cly_id\") {\n                            store(\"cly_cmp_id\", nv[1]);\n                        }\n                        else if (nv[0] === \"cly_uid\") {\n                            store(\"cly_cmp_uid\", nv[1]);\n                        }\n                        else if (nv[0] === \"cly_device_id\") {\n                            Countly.device_id = nv[1];\n                        }\n                        else if((nv[0]+\"\").indexOf(\"utm_\") === 0 && Countly.utm[nv[0].replace(\"utm_\", \"\")]){\n                            utms[nv[0].replace(\"utm_\", \"\")] = nv[1];\n                            hasUTM = true;\n                        }\n                    }\n                    if(hasUTM){\n                        for(var tag in Countly.utm){\n                            if(utms[tag]){\n                                Countly.userData.set(\"utm_\"+tag, utms[tag]);\n                            }\n                            else{\n                                Countly.userData.unset(\"utm_\"+tag);\n                            }\n                        }\n                        Countly.userData.save();\n                    }\n                }\n                \n                if (!offlineMode) {\n                    if (Countly.device_id !== store(\"cly_id\")) {\n                        store(\"cly_id\", Countly.device_id);\n                    }\n                }\n                heartBeat();\n\n                notifyLoaders();\n                \n                if (Countly.remote_config) {\n                    Countly.fetch_remote_config(Countly.remote_config);\n                }\n            }\n        }\n    };\n\n    /**\n    * Modify feature groups for consent management. Allows you to group multiple features under one feature group\n    * @param {object} features - object to define feature name as key and core features as value\n    * @example <caption>Adding all features under one group</caption>\n    * Countly.group_features({all:[\"sessions\",\"events\",\"views\",\"scrolls\",\"clicks\",\"forms\",\"crashes\",\"attribution\",\"users\"]});\n    * //After this call Countly.add_consent(\"all\") to allow all features\n    @example <caption>Grouping features</caption>\n    * Countly.group_features({\n    *    activity:[\"sessions\",\"events\",\"views\"],\n    *    interaction:[\"scrolls\",\"clicks\",\"forms\"]\n    * });\n    * //After this call Countly.add_consent(\"activity\") to allow \"sessions\",\"events\",\"views\"\n    * //or call Countly.add_consent(\"interaction\") to allow \"scrolls\",\"clicks\",\"forms\"\n    * //or call Countly.add_consent(\"crashes\") to allow some separate feature\n    */\n    Countly.group_features = function (features) {\n        if (features) {\n            for (var i in features) {\n                if (!consents[i]) {\n                    if (typeof features[i] === \"string\") {\n                        consents[i] = { features: [features[i]] };\n                    }\n                    else if (features[i] && Array.isArray( features[i] ) && features[i].length) {\n                        consents[i] = { features: features[i] };\n                    }\n                    else {\n                        log(\"Incorrect feature list for \" + i + \" value: \" + features[i]);\n                    }\n                }\n                else {\n                    log(\"Feature name \" + i + \" is already reserved\");\n                }\n            }\n        }\n        else {\n            log(\"Incorrect features: \" + features);\n        }\n    };\n\n    /**\n    * Check if consent is given for specific feature (either core feature of from custom feature group)\n    * @param {string} feature - name of the feature, possible values, \"sessions\",\"events\",\"views\",\"scrolls\",\"clicks\",\"forms\",\"crashes\",\"attribution\",\"users\" or customly provided through {@link Countly.group_features}\n    */\n    Countly.check_consent = function (feature) {\n        if (!Countly.require_consent) {\n            //we don't need to have specific consents\n            return true;\n        }\n        if (consents[feature]) {\n            return (consents[feature] && consents[feature].optin) ? true : false;\n        }\n        else {\n            log(\"No feature available for \" + feature);\n        }\n        return false;\n    };\n\n    /**\n    * Check if any consent is given, for some cases, when crucial parts are like device_id are needed for any request\n    */\n    Countly.check_any_consent = function () {\n        if (!Countly.require_consent) {\n            //we don't need to have consents\n            return true;\n        }\n        for (var i in consents) {\n            if (consents[i] && consents[i].optin) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /**\n    * Add consent for specific feature, meaning, user allowed to track that data (either core feature of from custom feature group)\n    * @param {string|array} feature - name of the feature, possible values, \"sessions\",\"events\",\"views\",\"scrolls\",\"clicks\",\"forms\",\"crashes\",\"attribution\",\"users\", etc or customly provided through {@link Countly.group_features}\n    */\n    Countly.add_consent = function (feature) {\n        log(\"Adding consent for \" + feature);\n        if ( Array.isArray( feature ) ) {\n            for (var i = 0; i < feature.length; i++) {\n                Countly.add_consent(feature[i]);\n            }\n        }\n        else if (consents[feature]) {\n            if (consents[feature].features) {\n                consents[feature].optin = true;\n                //this is added group, let's iterate through sub features\n                Countly.add_consent(consents[feature].features);\n            }\n            else {\n                //this is core feature\n                if (consents[feature].optin !== true) {\n                    syncConsents[feature] = true;\n                    consents[feature].optin = true;\n                    updateConsent();\n                    setTimeout(function () {\n                        if (feature === \"sessions\" && lastParams.begin_session) {\n                            Countly.begin_session.apply(Countly, lastParams.begin_session);\n                            lastParams.begin_session = null;\n                        }\n                        else if (feature === \"views\" && lastParams.track_pageview) {\n                            lastView = null;\n                            Countly.track_pageview.apply(Countly, lastParams.track_pageview);\n                            lastParams.track_pageview = null;\n                        }\n                        if (lastParams.change_id) {\n                            Countly.change_id.apply(Countly, lastParams.change_id);\n                            lastParams.change_id = null;\n                        }\n                    }, 1);\n\n                }\n            }\n        }\n        else {\n            log(\"No feature available for \" + feature);\n        }\n    };\n\n\n    /**\n    * Remove consent for specific feature, meaning, user opted out to track that data (either core feature of from custom feature group)\n    * @param {string|array} feature - name of the feature, possible values, \"sessions\",\"events\",\"views\",\"scrolls\",\"clicks\",\"forms\",\"crashes\",\"attribution\",\"users\", etc or customly provided through {@link Countly.group_features}\n    */\n    Countly.remove_consent = function (feature) {\n        log(\"Removing consent for \" + feature);\n        if ( Array.isArray( feature ) ) {\n            for (var i = 0; i < feature.length; i++) {\n                Countly.remove_consent(feature[i]);\n            }\n        }\n        else if (consents[feature]) {\n            if (consents[feature].features) {\n                //this is added group, let's iterate through sub features\n                Countly.remove_consent(consents[feature].features);\n            }\n            else {\n                //this is core feature\n                if (consents[feature].optin !== false) {\n                    syncConsents[feature] = false;\n                    updateConsent();\n                }\n            }\n            consents[feature].optin = false;\n        }\n        else {\n            log(\"No feature available for \" + feature);\n        }\n    };\n\n    var consentTimer;\n    var updateConsent = function () {\n        if (consentTimer) {\n            //delay syncing consents\n            clearTimeout(consentTimer);\n            consentTimer = null;\n        }\n        consentTimer = setTimeout(function () {\n            if (hasAnyProperties(syncConsents)) {\n                //we have consents to sync, create request\n                toRequestQueue({ consent: JSON.stringify(syncConsents) });\n                //clear consents that needs syncing\n                syncConsents = {};\n            }\n        }, 1000);\n    };\n    \n    Countly.enable_offline_mode = function(){\n        offlineMode = true;\n        Countly.device_id = \"[CLY]_temp_id\";\n    };\n    \n    Countly.disable_offline_mode = function(device_id){\n        offlineMode = false;\n        if (device_id && Countly.device_id !== device_id) {\n            Countly.device_id = device_id;\n            store(\"cly_id\", Countly.device_id);\n            log(\"Changing id\");\n        }\n        else {\n            Countly.device_id = getId();\n            if (Countly.device_id !== store(\"cly_id\")) {\n                store(\"cly_id\", Countly.device_id);\n            }\n        }\n        var needResync = false;\n        if (requestQueue.length > 0) {\n            for (var i = 0; i < requestQueue.length; i++) {\n                if (requestQueue[i].device_id === \"[CLY]_temp_id\") {\n                    requestQueue[i].device_id = Countly.device_id;\n                    needResync = true;\n                }\n            }\n        }\n        if (needResync) {\n            store(\"cly_queue\", requestQueue, true);\n        }\n    };\n\n    /**\n    * Start session\n    * @param {boolean} noHeartBeat - true if you don't want to use internal heartbeat to manage session\n    * @param {bool} force - force begin session request even if session cookie is enabled\n    */\n\n    Countly.begin_session = function (noHeartBeat, force) {\n        if (Countly.check_consent(\"sessions\")) {\n            if (!sessionStarted) {\n                lastBeat = getTimestamp();\n                sessionStarted = true;\n                autoExtend = (noHeartBeat) ? false : true;\n                var expire = store(\"cly_session\");\n                if (force || !useSessionCookie || !expire || parseInt(expire) <= getTimestamp()) {\n                    log(\"Session started\");\n                    var req = {};\n                    req.begin_session = 1;\n                    req.metrics = JSON.stringify(getMetrics());\n                    toRequestQueue(req);\n                }\n                store(\"cly_session\", getTimestamp() + (sessionCookieTimeout * 60));\n            }\n        }\n        else {\n            lastParams.begin_session = arguments;\n        }\n    };\n\n    /**\n    * Report session duration\n    * @param {int} sec - amount of seconds to report for current session\n    */\n    Countly.session_duration = function (sec) {\n        if (Countly.check_consent(\"sessions\")) {\n            if (sessionStarted) {\n                log(\"Session extended\", sec);\n                toRequestQueue({ session_duration: sec });\n                extendSession();\n            }\n        }\n    };\n\n    /**\n    * End current session\n    * @param {int} sec - amount of seconds to report for current session, before ending it\n    * @param {bool} force - force end session request even if session cookie is enabled\n    */\n    Countly.end_session = function (sec, force) {\n        if (Countly.check_consent(\"sessions\")) {\n            if (sessionStarted) {\n                sec = sec || getTimestamp() - lastBeat;\n                reportViewDuration();\n                if (!useSessionCookie || force) {\n                    log(\"Ending session\");\n                    toRequestQueue({ end_session: 1, session_duration: sec });\n                }\n                else{\n                    Countly.session_duration(sec);\n                }\n                sessionStarted = false;\n            }\n        }\n    };\n\n    /**\n    * Change current user/device id\n    * @param {string} newId - new user/device ID to use\n    * @param {boolean} merge - move data from old ID to new ID on server\n    **/\n    Countly.change_id = function (newId, merge) {\n        if (Countly.device_id !== newId) {\n            if (!merge) {\n                //empty event queue\n                if (eventQueue.length > 0) {\n                    toRequestQueue({ events: JSON.stringify(eventQueue) });\n                    eventQueue = [];    \n                    store(\"cly_event\", eventQueue);\n                }\n                //end current session\n                Countly.end_session(null, true);\n                //clear timed events\n                timedEvents = {};\n            }\n            var oldId = Countly.device_id;\n            Countly.device_id = newId;\n            store(\"cly_id\", Countly.device_id);\n            log(\"Changing id\");\n            if (merge) {\n                if (Countly.check_any_consent()) {\n                    toRequestQueue({ old_device_id: oldId });\n                }\n                else {\n                    lastParams.change_id = arguments;\n                }\n            }\n            else {\n                //start new session for new id\n                Countly.begin_session(!autoExtend, true);\n            }\n            if (Countly.remote_config) {\n                remoteConfigs = {};\n                store(\"cly_remote_configs\", remoteConfigs);\n                Countly.fetch_remote_config(Countly.remote_config);\n            }\n        }\n    };\n\n    /**\n    * Report custom event\n    * @param {Object} event - Countly {@link Event} object\n    * @param {string} event.key - name or id of the event\n    * @param {number} [event.count=1] - how many times did event occur\n    * @param {number=} event.sum - sum to report with event (if any)\n    * @param {number=} event.dur - duration to report with event (if any)\n    * @param {Object=} event.segmentation - object with segments key /values\n    **/\n    Countly.add_event = function (event) {\n        if (Countly.check_consent(\"events\")) {\n            add_cly_events(event);\n        }\n    };\n\n    //internal method for events, in case there is no consent for custom events, but internal events has consents\n    function add_cly_events(event) {\n        //ignore bots\n        if (Countly.ignore_visitor) {\n            return;\n        }\n\n        if (!event.key) {\n            log(\"Event must have key property\");\n            return;\n        }\n\n        if (!event.count) {\n            event.count = 1;\n        }\n\n        var props = [\"key\", \"count\", \"sum\", \"dur\", \"segmentation\"];\n        var e = getProperties(event, props);\n        e.timestamp = getMsTimestamp();\n        var date = new Date();\n        e.hour = date.getHours();\n        e.dow = date.getDay();\n        eventQueue.push(e);\n        store(\"cly_event\", eventQueue);\n        log(\"Adding event: \", event);\n    }\n\n    /**\n    * Start timed event, which will fill in duration property upon ending automatically\n    * @param {string} key - event name that will be used as key property\n    **/\n    Countly.start_event = function (key) {\n        if (timedEvents[key]) {\n            log(\"Timed event with key \" + key + \" already started\");\n            return;\n        }\n        timedEvents[key] = getTimestamp();\n    };\n\n    /**\n    * End timed event\n    * @param {string|object} event - event key if string or Countly event same as passed to {@link Countly.add_event}\n    **/\n    Countly.end_event = function (event) {\n        if (typeof event == \"string\") {\n            event = { key: event };\n        }\n        if (!event.key) {\n            log(\"Event must have key property\");\n            return;\n        }\n        if (!timedEvents[event.key]) {\n            log(\"Timed event with key \" + event.key + \" was not started\");\n            return;\n        }\n        event.dur = getTimestamp() - timedEvents[event.key];\n        Countly.add_event(event);\n        delete timedEvents[event.key];\n    };\n\n    /**\n    * Provide information about user\n    * @param {Object} user - Countly {@link UserDetails} object\n    * @param {string=} user.name - user's full name\n    * @param {string=} user.username - user's username or nickname\n    * @param {string=} user.email - user's email address\n    * @param {string=} user.organization - user's organization or company\n    * @param {string=} user.phone - user's phone number\n    * @param {string=} user.picture - url to user's picture\n    * @param {string=} user.gender - M value for male and F value for femail\n    * @param {number=} user.byear - user's birth year used to calculate current age\n    * @param {Object=} user.custom - object with custom key value properties you want to save with user\n    **/\n    Countly.user_details = function (user) {\n        if (Countly.check_consent(\"users\")) {\n            log(\"Adding userdetails: \", user);\n            var props = [\"name\", \"username\", \"email\", \"organization\", \"phone\", \"picture\", \"gender\", \"byear\", \"custom\"];\n            toRequestQueue({ user_details: JSON.stringify(getProperties(user, props)) });\n        }\n    };\n\n    /**\n    * Report user conversion to the server (when user signup or made a purchase, or whatever your conversion is), if there is no campaign data, user will be reported as organic\n    * @param {string=} campaign_id - id of campaign, or will use the one that is stored after campaign link click\n    * @param {string=} campaign_user_id - id of user's click on campaign, or will use the one that is stored after campaign link click\n    **/\n    Countly.report_conversion = function (campaign_id, campaign_user_id) {\n        if (Countly.check_consent(\"attribution\")) {\n            campaign_id = campaign_id || store(\"cly_cmp_id\") || \"cly_organic\";\n            campaign_user_id = campaign_user_id || store(\"cly_cmp_uid\");\n\n            if (campaign_id && campaign_user_id) {\n                toRequestQueue({ campaign_id: campaign_id, campaign_user: campaign_user_id });\n            }\n            else if (campaign_id) {\n                toRequestQueue({ campaign_id: campaign_id });\n            }\n        }\n    };\n\n    /**************************\n    * Modifying custom property values of user details\n    * Possible modification commands\n    *  - inc, to increment existing value by provided value\n    *  - mul, to multiply existing value by provided value\n    *  - max, to select maximum value between existing and provided value\n    *  - min, to select minimum value between existing and provided value\n    *  - setOnce, to set value only if it was not set before\n    *  - push, creates an array property, if property does not exist, and adds value to array\n    *  - pull, to remove value from array property\n    *  - addToSet, creates an array property, if property does not exist, and adds unique value to array, only if it does not yet exist in array\n    **************************/\n    var customData = {};\n    var change_custom_property = function (key, value, mod) {\n        if (Countly.check_consent(\"users\")) {\n            if (!customData[key]) {\n                customData[key] = {};\n            }\n            if (mod === \"$push\" || mod === \"$pull\" || mod === \"$addToSet\") {\n                if (!customData[key][mod]) {\n                    customData[key][mod] = [];\n                }\n                customData[key][mod].push(value);\n            }\n            else {\n                customData[key][mod] = value;\n            }\n        }\n    };\n\n    /**\n    * Control user related custom properties. Don't forget to call save after finishing manipulation of custom data\n    * @namespace Countly.userData\n    * @name Countly.userData\n    * @example\n    * //set custom key value property\n    * Countly.userData.set(\"twitter\", \"ar2rsawseen\");\n    * //create or increase specific number property\n    * Countly.userData.increment(\"login_count\");\n    * //add new value to array property if it is not already there\n    * Countly.userData.push_unique(\"selected_category\", \"IT\");\n    * //send all custom property modified data to server\n    * Countly.userData.save();\n    */\n    Countly.userData = {\n        /**\n        * Sets user's custom property value\n        * @param {string} key - name of the property to attach to user\n        * @param {string|number} value - value to store under provided property\n        **/\n        set: function (key, value) {\n            customData[key] = value;\n        },\n        /**\n        * Unset's/delete's user's custom property\n        * @param {string} key - name of the property to delete\n        **/\n        unset: function (key) {\n            customData[key] = \"\";\n        },\n        /**\n        * Sets user's custom property value only if it was not set before\n        * @param {string} key - name of the property to attach to user\n        * @param {string|number} value - value to store under provided property\n        **/\n        set_once: function (key, value) {\n            change_custom_property(key, value, \"$setOnce\");\n        },\n        /**\n        * Increment value under the key of this user's custom properties by one\n        * @param {string} key - name of the property to attach to user\n        **/\n        increment: function (key) {\n            change_custom_property(key, 1, \"$inc\");\n        },\n        /**\n        * Increment value under the key of this user's custom properties by provided value\n        * @param {string} key - name of the property to attach to user\n        * @param {number} value - value by which to increment server value\n        **/\n        increment_by: function (key, value) {\n            change_custom_property(key, value, \"$inc\");\n        },\n        /**\n        * Multiply value under the key of this user's custom properties by provided value\n        * @param {string} key - name of the property to attach to user\n        * @param {number} value - value by which to multiply server value\n        **/\n        multiply: function (key, value) {\n            change_custom_property(key, value, \"$mul\");\n        },\n        /**\n        * Save maximal value under the key of this user's custom properties\n        * @param {string} key - name of the property to attach to user\n        * @param {number} value - value which to compare to server's value and store maximal value of both provided\n        **/\n        max: function (key, value) {\n            change_custom_property(key, value, \"$max\");\n        },\n        /**\n        * Save minimal value under the key of this user's custom properties\n        * @param {string} key - name of the property to attach to user\n        * @param {number} value - value which to compare to server's value and store minimal value of both provided\n        **/\n        min: function (key, value) {\n            change_custom_property(key, value, \"$min\");\n        },\n        /**\n        * Add value to array under the key of this user's custom properties. If property is not an array, it will be converted to array\n        * @param {string} key - name of the property to attach to user\n        * @param {string|number} value - value which to add to array\n        **/\n        push: function (key, value) {\n            change_custom_property(key, value, \"$push\");\n        },\n        /**\n        * Add value to array under the key of this user's custom properties, storing only unique values. If property is not an array, it will be converted to array\n        * @param {string} key - name of the property to attach to user\n        * @param {string|number} value - value which to add to array\n        **/\n        push_unique: function (key, value) {\n            change_custom_property(key, value, \"$addToSet\");\n        },\n        /**\n        * Remove value from array under the key of this user's custom properties\n        * @param {string} key - name of the property\n        * @param {string|number} value - value which to remove from array\n        **/\n        pull: function (key, value) {\n            change_custom_property(key, value, \"$pull\");\n        },\n        /**\n        * Save changes made to user's custom properties object and send them to server\n        **/\n        save: function () {\n            if (Countly.check_consent(\"users\")) {\n                toRequestQueue({ user_details: JSON.stringify({ custom: customData }) });\n            }\n            customData = {};\n        }\n    };\n\n    /**\n    * Automatically track javascript errors that happen on the website and report them to the server\n    * @param {string=} segments - additional key value pairs you want to provide with error report, like versions of libraries used, etc.\n    **/\n    Countly.track_errors = function (segments) {\n        crashSegments = segments;\n        //override global uncaught error handler\n        window.onerror = function (msg, url, line, col, err) {\n            if (typeof err !== \"undefined\") {\n                recordError(err, false);\n            }\n            else {\n                col = col || (window.event && window.event.errorCharacter);\n                var error = \"\";\n                if (typeof msg !== \"undefined\") {\n                    error += msg + \"\\n\";\n                }\n                if (typeof url !== \"undefined\") {\n                    error += \"at \" + url;\n                }\n                if (typeof line !== \"undefined\") {\n                    error += \":\" + line;\n                }\n                if (typeof col !== \"undefined\") {\n                    error += \":\" + col;\n                }\n                error += \"\\n\";\n\n                try {\n                    var stack = [];\n                    var f = arguments.callee.caller; // jshint ignore:line\n                    while (f) {\n                        stack.push(f.name);\n                        f = f.caller;\n                    }\n                    error += stack.join(\"\\n\");\n                } catch (ex) { \n                    //silent error\n                }\n                recordError(error, false);\n            }\n        };\n        \n        window.addEventListener('unhandledrejection', function(event) {\n            recordError(new Error('Unhandled rejection (reason: ' + (event.reason && event.reason.stack ? event.reason.stack : event.reason ) + ').'), true);\n        });\n    };\n\n    /**\n    * Log an exception that you catched through try and catch block and handled yourself and just want to report it to server\n    * @param {Object} err - error exception object provided in catch block\n    * @param {string=} segments - additional key value pairs you want to provide with error report, like versions of libraries used, etc.\n    **/\n    Countly.log_error = function (err, segments) {\n        recordError(err, true, segments);\n    };\n\n    /**\n    * Add new line in the log of breadcrumbs of what user did, will be included together with error report\n    * @param {string} record - any text describing what user did\n    **/\n    Countly.add_log = function (record) {\n        if (Countly.check_consent(\"crashes\")) {\n            if(crashLogs.length > maxCrashLogs) {\n                crashLogs.shift();\n            }\n            crashLogs.push(record);\n        }\n    };\n\n    /**\n    * Fetch remote config\n    * @param {array=} keys - Array of keys to fetch, if not provided will fetch all keys\n    * @param {array=} omit_keys - Array of keys to omit, if provided will fetch all keys except provided ones\n    * @param {function=} callback - Callback to notify with first param error and second param remote config object\n    **/\n    Countly.fetch_remote_config = function (keys, omit_keys, callback) {\n        if (Countly.check_any_consent()) {\n            var request = {\n                method: \"fetch_remote_config\"\n            };\n            if (Countly.check_consent(\"sessions\")) {\n                request.metrics = JSON.stringify(getMetrics());\n            }\n            if (keys) {\n                if (!callback && typeof keys === \"function\") {\n                    callback = keys;\n                    keys = null;\n                }\n                else if (Array.isArray(keys) && keys.length) {\n                    request.keys = JSON.stringify(keys);\n                }\n            }\n            if (omit_keys) {\n                if (!callback && typeof omit_keys === \"function\") {\n                    callback = omit_keys;\n                    omit_keys = null;\n                }\n                else if (Array.isArray(omit_keys) && omit_keys.length) {\n                    request.omit_keys = JSON.stringify(omit_keys);\n                }\n            }\n            prepareRequest(request);\n            sendXmlHttpRequest(Countly.url + readPath, request, function(err, params, responseText){\n                try {\n                    var configs = JSON.parse(responseText);\n                    if (request.keys || request.omit_keys) {\n                        //we merge config\n                        for (var i in configs) {\n                            remoteConfigs[i] = configs[i];\n                        }\n                    }\n                    else {\n                        //we replace config\n                        remoteConfigs = configs;\n                    }\n                    store(\"cly_remote_configs\", remoteConfigs);\n                }\n                catch(ex) {\n                    //silent catch\n                }\n                if (typeof callback === \"function\") {\n                    callback(err, remoteConfigs);\n                }\n            });\n        }\n    };\n    \n    /**\n    * Get Remote config object or specific value for provided key\n    * @param {string=} key - if provided, will return value for key, or return whole object\n    **/\n    Countly.get_remote_config = function (key) {\n        if (typeof key !== \"undefined\") {\n            return remoteConfigs[key];\n        }\n        return remoteConfigs;\n    };\n    \n    /**\n    * Stop tracking duration time for this user\n    **/\n    Countly.stop_time = function () {\n        if (trackTime) {\n            trackTime = false;\n            storedDuration = getTimestamp() - lastBeat;\n            lastViewStoredDuration = getTimestamp() - lastViewTime;\n        }\n    };\n\n    /**\n    * Start tracking duration time for this user, by default it is automatically tracked if you are using internal session handling\n    **/\n    Countly.start_time = function () {\n        if (!trackTime) {\n            trackTime = true;\n            lastBeat = getTimestamp() - storedDuration;\n            lastViewTime = getTimestamp() - lastViewStoredDuration;\n            lastViewStoredDuration = 0;\n            extendSession();\n        }\n    };\n\n    /**\n    * Track user sessions automatically, including  time user spent on your website\n    **/\n    Countly.track_sessions = function () {\n        //start session\n        Countly.begin_session();\n        Countly.start_time();\n\n        //end session on unload\n        add_event(window, \"beforeunload\", function () {\n            Countly.end_session();\n        });\n        add_event(window, \"unload\", function () {\n            Countly.end_session();\n        });\n\n        //manage sessions on window visibility events\n        var hidden = \"hidden\";\n\n        function onchange() {\n            if (document[hidden]) {\n                Countly.stop_time();\n            } else {\n                Countly.start_time();\n            }\n        }\n\n        //Page Visibility API\n        if (hidden in document) {\n            document.addEventListener(\"visibilitychange\", onchange);\n        }\n        else if ((hidden = \"mozHidden\") in document) {\n            document.addEventListener(\"mozvisibilitychange\", onchange);\n        }\n        else if ((hidden = \"webkitHidden\") in document) {\n            document.addEventListener(\"webkitvisibilitychange\", onchange);\n        }\n        else if ((hidden = \"msHidden\") in document) {\n            document.addEventListener(\"msvisibilitychange\", onchange);\n        }\n        // IE 9 and lower:\n        else if (\"onfocusin\" in document) {\n            add_event(window, \"focusin\", function () {\n                Countly.start_time();\n            });\n            add_event(window, \"focusout\", function () {\n                Countly.stop_time();\n            });\n        }\n        // All others:\n        else {\n            //old way\n            add_event(window, \"focus\", function () {\n                Countly.start_time();\n            });\n            add_event(window, \"blur\", function () {\n                Countly.stop_time();\n            });\n\n            //newer mobile compatible way\n            add_event(window, \"pageshow\", function () {\n                Countly.start_time();\n            });\n            add_event(window, \"pagehide\", function () {\n                Countly.stop_time();\n            });\n        }\n\n        function resetInactivity() {\n            if (inactivityCounter >= inactivityTime) {\n                Countly.start_time();\n            }\n            inactivityCounter = 0;\n        }\n\n        add_event(window, \"mousemove\", resetInactivity);\n        add_event(window, \"click\", resetInactivity);\n        add_event(window, \"keydown\", resetInactivity);\n        add_event(window, \"scroll\", resetInactivity);\n\n        //track user inactivity\n        setInterval(function () {\n            inactivityCounter++;\n            if (inactivityCounter >= inactivityTime) {\n                Countly.stop_time();\n            }\n        }, 60000);\n    };\n\n    /**\n    * Track page views user visits\n    * @param {string=} page - optional name of the page, by default uses current url path\n    * @param {array=} ignoreList - optional array of strings or regexes to test for the url/view name to ignore and not report\n    **/\n    Countly.track_pageview = function (page, ignoreList) {\n        reportViewDuration();\n        //we got ignoreList first\n        if (page && Array.isArray( page ) ) {\n            ignoreList = page;\n            page = null;\n        }\n        if (!page) {\n            page = Countly.getViewName();\n        }\n        if (ignoreList && ignoreList.length) {\n            for (var i = 0; i < ignoreList.length; i++) {\n                try {\n                    var reg = new RegExp(ignoreList[i]);\n                    if (reg.test(page)) {\n                        log(\"Ignored:\", page);\n                        return;\n                    }\n                }\n                catch (ex) {log(\"Problem with regex\", ignoreList[i]); }\n            }\n        }\n        lastView = page;\n        lastViewTime = getTimestamp();\n        var segments = {\n            \"name\": page,\n            \"visit\": 1,\n            \"domain\": window.location.hostname,\n            \"view\": Countly.getViewUrl()\n        };\n\n        if (typeof document.referrer !== \"undefined\" && document.referrer.length) {\n            var matches = urlParseRE.exec(document.referrer);\n            //do not report referrers of current website\n            if (matches && matches[11] && matches[11] !== window.location.hostname) {\n                segments.start = 1;\n            }\n        }\n\n        //track pageview\n        if (Countly.check_consent(\"views\")) {\n            add_cly_events({\n                \"key\": \"[CLY]_view\",\n                \"segmentation\": segments\n            });\n        }\n        else {\n            lastParams.track_pageview = arguments;\n        }\n    };\n\n    /**\n    * Track page views user visits. Alias of {@link track_pageview} method for compatability with NodeJS SDK\n    * @param {string=} page - optional name of the page, by default uses current url path\n    * @param {array=} ignoreList - optional array of strings or regexes to test for the url/view name to ignore and not report\n    **/\n    Countly.track_view = function (page, ignoreList) {\n        Countly.track_pageview(page, ignoreList);\n    };\n\n    /**\n    * Track all clicks on this page\n    * @param {Object=} parent - DOM object which children to track, by default it is document body\n    **/\n    Countly.track_clicks = function (parent) {\n        parent = parent || document;\n        var shouldProcess = true;\n        function processClick(event) {\n            if (shouldProcess) {\n                shouldProcess = false;\n\n                //cross browser click coordinates\n                get_page_coord(event);\n                if (typeof event.pageX !== \"undefined\" && typeof event.pageY !== \"undefined\") {\n                    var height = getDocHeight();\n                    var width = getDocWidth();\n\n                    //record click event\n                    if (Countly.check_consent(\"clicks\")) {\n                        add_cly_events({\n                            \"key\": \"[CLY]_action\",\n                            \"segmentation\": {\n                                \"type\": \"click\",\n                                \"x\": event.pageX,\n                                \"y\": event.pageY,\n                                \"width\": width,\n                                \"height\": height,\n                                \"domain\": window.location.hostname,\n                                \"view\": Countly.getViewUrl()\n                            }\n                        });\n                    }\n                }\n                setTimeout(function () { shouldProcess = true; }, 1000);\n            }\n        }\n        //add any events you want\n        add_event(parent, \"click\", processClick);\n    };\n\n    /**\n    * Track all scrolls on this page\n    * @param {Object=} parent - DOM object which children to track, by default it is document body\n    **/\n    Countly.track_scrolls = function (parent) {\n        parent = parent || window;\n        var shouldProcess = true;\n        var scrollY = 0;\n\n        function processScroll() {\n            scrollY = Math.max(scrollY, window.scrollY, document.body.scrollTop, document.documentElement.scrollTop);\n        }\n\n        function processScrollView() {\n            if (shouldProcess) {\n                shouldProcess = false;\n                var height = getDocHeight();\n                var width = getDocWidth();\n\n                var viewportHeight = getViewportHeight();\n\n                if (Countly.check_consent(\"scrolls\")) {\n                    add_cly_events({\n                        \"key\": \"[CLY]_action\",\n                        \"segmentation\": {\n                            \"type\": \"scroll\",\n                            \"y\": scrollY + viewportHeight,\n                            \"width\": width,\n                            \"height\": height,\n                            \"domain\": window.location.hostname,\n                            \"view\": Countly.getViewUrl()\n                        }\n                    });\n                }\n            }\n        }\n\n        add_event(parent, \"scroll\", processScroll);\n        add_event(parent, \"beforeunload\", processScrollView);\n        add_event(parent, \"unload\", processScrollView);\n    };\n\n    /**\n    * Generate custom event for all links that were clicked on this page\n    * @param {Object=} parent - DOM object which children to track, by default it is document body\n    **/\n    Countly.track_links = function (parent) {\n        parent = parent || document;\n        function processClick(event) {\n\n            //get element which was clicked\n            var elem = get_event_target(event).closest(\"a\");\n\n            if (elem) {\n                //cross browser click coordinates\n                get_page_coord(event);\n\n                //record click event\n                if (Countly.check_consent(\"clicks\")) {\n                    add_cly_events({\n                        \"key\": \"linkClick\",\n                        \"segmentation\": {\n                            \"href\": elem.href,\n                            \"text\": elem.innerText,\n                            \"id\": elem.id,\n                            \"view\": Countly.getViewUrl()\n                        }\n                    });\n                }\n            }\n        }\n\n        //add any events you want\n        add_event(parent, \"click\", processClick);\n    };\n\n    /**\n    * Generate custom event for all forms that were submitted on this page\n    * @param {Object=} parent - DOM object which children to track, by default it is document body\n    * @param {boolean=} trackHidden - provide true to also track hidden inputs, default false\n    **/\n    Countly.track_forms = function (parent, trackHidden) {\n        parent = parent || document;\n        function getInputName(input) {\n            return input.name || input.id || input.type || input.nodeName;\n        }\n        function processForm(event) {\n            var form = get_event_target(event);\n            var segmentation = {\n                \"id\": form.id,\n                \"name\": form.name,\n                \"action\": form.action,\n                \"method\": form.method,\n                \"view\": Countly.getViewUrl()\n            };\n\n            //get input values\n            var input;\n            if (typeof form.elements !== \"undefined\") {\n                for (var i = 0; i < form.elements.length; i++) {\n                    input = form.elements[i];\n                    if (input && input.type !== \"password\" && input.className.indexOf(\"cly_user_ignore\") === -1) {\n                        if (typeof segmentation[\"input:\" + getInputName(input)] === \"undefined\") {\n                            segmentation[\"input:\" + getInputName(input)] = [];\n                        }\n                        if (input.nodeName.toLowerCase() === \"select\") {\n                            if (typeof input.multiple !== \"undefined\") {\n                                segmentation[\"input:\" + getInputName(input)].push(getMultiSelectValues(input));\n                            }\n                            else {\n                                segmentation[\"input:\" + getInputName(input)].push(input.options[input.selectedIndex].value);\n                            }\n                        }\n                        else if (input.nodeName.toLowerCase() === \"input\") {\n                            if (typeof input.type !== \"undefined\") {\n                                if (input.type.toLowerCase() === \"checkbox\" || input.type.toLowerCase() === \"radio\") {\n                                    if (input.checked) {\n                                        segmentation[\"input:\" + getInputName(input)].push(input.value);\n                                    }\n                                }\n                                else if(input.type.toLowerCase() !== \"hidden\" || trackHidden) {\n                                    segmentation[\"input:\" + getInputName(input)].push(input.value);\n                                }\n                            }\n                            else {\n                                segmentation[\"input:\" + getInputName(input)].push(input.value);\n                            }\n                        }\n                        else if (input.nodeName.toLowerCase() === \"textarea\") {\n                            segmentation[\"input:\" + getInputName(input)].push(input.value);\n                        }\n                        else if (typeof input.value !== \"undefined\") {\n                            segmentation[\"input:\" + getInputName(input)].push(input.value);\n                        }\n                    }\n                }\n                for (var key in segmentation) {\n                    if (typeof segmentation[key].join != \"undefined\") {\n                        segmentation[key] = segmentation[key].join(\", \");\n                    }\n                }\n            }\n\n            //record submit event\n            if (Countly.check_consent(\"forms\")) {\n                add_cly_events({\n                    \"key\": \"formSubmit\",\n                    \"segmentation\": segmentation\n                });\n            }\n        }\n\n        //add any events you want\n        add_event(parent, \"submit\", processForm);\n    };\n\n    /**\n    * Collect possible user data from submitted forms. Add cly_user_ignore class to ignore inputs in forms or cly_user_{key} to collect data from this input as specified key, as cly_user_username to save collected value from this input as username property. If not class is provided, Countly SDK will try to determine type of information automatically.\n    * @param {Object=} parent - DOM object which children to track, by default it is document body\n    * @param {boolean} [useCustom=false] - submit collected data as custom user properties, by default collects as main user properties\n    **/\n    Countly.collect_from_forms = function (parent, useCustom) {\n        parent = parent || document;\n        function processForm(event) {\n            var form = get_event_target(event);\n            var userdata = {};\n            var hasUserInfo = false;\n\n            //get input values\n            var input;\n            if (typeof form.elements !== \"undefined\") {\n                //load labels for inputs\n                var labelData = {};\n                var labels = parent.getElementsByTagName(\"LABEL\");\n                var i, j;\n                for (i = 0; i < labels.length; i++) {\n                    if (labels[i].htmlFor && labels[i].htmlFor !== \"\") {\n                        labelData[labels[i].htmlFor] = labels[i].innerText || labels[i].textContent || labels[i].innerHTML;\n                    }\n                }\n                for (i = 0; i < form.elements.length; i++) {\n                    input = form.elements[i];\n                    if (input && input.type !== \"password\") {\n                        //check if element should be ignored\n                        if (input.className.indexOf(\"cly_user_ignore\") === -1) {\n                            var value = \"\";\n                            //get value from input\n                            if (input.nodeName.toLowerCase() === \"select\") {\n                                if (typeof input.multiple !== \"undefined\") {\n                                    value = getMultiSelectValues(input);\n                                }\n                                else {\n                                    value = input.options[input.selectedIndex].value;\n                                }\n                            }\n                            else if (input.nodeName.toLowerCase() === \"input\") {\n                                if (typeof input.type !== \"undefined\") {\n                                    if (input.type.toLowerCase() === \"checkbox\" || input.type.toLowerCase() === \"radio\") {\n                                        if (input.checked) {\n                                            value = input.value;\n                                        }\n                                    }\n                                    else {\n                                        value = input.value;\n                                    }\n                                }\n                                else {\n                                    value = input.value;\n                                }\n                            }\n                            else if (input.nodeName.toLowerCase() === \"textarea\") {\n                                value = input.value;\n                            }\n                            else if (typeof input.value !== \"undefined\") {\n                                value = input.value;\n                            }\n                            //check if input was marked to be collected\n                            if (input.className && input.className.indexOf(\"cly_user_\") !== -1) {\n                                var classes = input.className.split(\" \");\n                                for (j = 0; j < classes.length; j++) {\n                                    if (classes[j].indexOf(\"cly_user_\") === 0) {\n                                        userdata[classes[j].replace(\"cly_user_\", \"\")] = value;\n                                        hasUserInfo = true;\n                                        break;\n                                    }\n                                }\n                            }\n                            //check for email\n                            else if ((input.type && input.type.toLowerCase() === \"email\") ||\n                                (input.name && input.name.toLowerCase().indexOf(\"email\") !== -1) ||\n                                (input.id && input.id.toLowerCase().indexOf(\"email\") !== -1) ||\n                                (input.id && labelData[input.id] && labelData[input.id].toLowerCase().indexOf(\"email\") !== -1) ||\n                                (/[^@\\s]+@[^@\\s]+\\.[^@\\s]+/).test(value)) {\n                                if (!userdata.email) {\n                                    userdata.email = value;\n                                }\n                                hasUserInfo = true;\n                            }\n                            else if ((input.name && input.name.toLowerCase().indexOf(\"username\") !== -1) ||\n                                (input.id && input.id.toLowerCase().indexOf(\"username\") !== -1) ||\n                                (input.id && labelData[input.id] && labelData[input.id].toLowerCase().indexOf(\"username\") !== -1)) {\n                                if (!userdata.username) {\n                                    userdata.username = value;\n                                }\n                                hasUserInfo = true;\n                            }\n                            else if ((input.name && (input.name.toLowerCase().indexOf(\"tel\") !== -1 || input.name.toLowerCase().indexOf(\"phone\") !== -1 || input.name.toLowerCase().indexOf(\"number\") !== -1)) ||\n                                (input.id && (input.id.toLowerCase().indexOf(\"tel\") !== -1 || input.id.toLowerCase().indexOf(\"phone\") !== -1 || input.id.toLowerCase().indexOf(\"number\") !== -1)) ||\n                                (input.id && labelData[input.id] && (labelData[input.id].toLowerCase().indexOf(\"tel\") !== -1 || labelData[input.id].toLowerCase().indexOf(\"phone\") !== -1 || labelData[input.id].toLowerCase().indexOf(\"number\") !== -1))) {\n                                if (!userdata.phone) {\n                                    userdata.phone = value;\n                                }\n                                hasUserInfo = true;\n                            }\n                            else if ((input.name && (input.name.toLowerCase().indexOf(\"org\") !== -1 || input.name.toLowerCase().indexOf(\"company\") !== -1)) ||\n                                (input.id && (input.id.toLowerCase().indexOf(\"org\") !== -1 || input.id.toLowerCase().indexOf(\"company\") !== -1)) ||\n                                (input.id && labelData[input.id] && (labelData[input.id].toLowerCase().indexOf(\"org\") !== -1 || labelData[input.id].toLowerCase().indexOf(\"company\") !== -1))) {\n                                if (!userdata.organization) {\n                                    userdata.organization = value;\n                                }\n                                hasUserInfo = true;\n                            }\n                            else if ((input.name && input.name.toLowerCase().indexOf(\"name\") !== -1) ||\n                                (input.id && input.id.toLowerCase().indexOf(\"name\") !== -1) ||\n                                (input.id && labelData[input.id] && labelData[input.id].toLowerCase().indexOf(\"name\") !== -1)) {\n                                if (!userdata.name) {\n                                    userdata.name = \"\";\n                                }\n                                userdata.name += value + \" \";\n                                hasUserInfo = true;\n                            }\n                        }\n                    }\n                }\n            }\n\n            //record user info, if any\n            if (hasUserInfo) {\n                log(\"Gathered user data\", userdata);\n                if (useCustom) {\n                    Countly.user_details({ custom: userdata });\n                }\n                else {\n                    Countly.user_details(userdata);\n                }\n            }\n        }\n\n        //add any events you want\n        add_event(parent, \"submit\", processForm);\n    };\n\n    /**\n    * Collect information about user from Facebook, if your website integrates Facebook SDK. Call this method after Facebook SDK is loaded and user is authenticated.\n    * @param {Object=} custom - Custom keys to collected from Facebook, key will be used to store as key in custom user properties and value as key in Facebook graph object. For example, {\"tz\":\"timezone\"} will collect Facebook's timezone property, if it is available and store it in custom user's property under \"tz\" key. If you want to get value from some sub object properties, then use dot as delimiter, for example, {\"location\":\"location.name\"} will collect data from Facebook's {\"location\":{\"name\":\"MyLocation\"}} object and store it in user's custom property \"location\" key\n    **/\n    Countly.collect_from_facebook = function (custom) {\n        /* globals FB */\n        if (FB && FB.api) {\n            FB.api(\"/me\", function (resp) {\n                var data = {};\n                if (resp.name) {\n                    data.name = resp.name;\n                }\n                if (resp.email) {\n                    data.email = resp.email;\n                }\n                if (resp.gender === \"male\") {\n                    data.gender = \"M\";\n                }\n                else if (resp.gender === \"female\") {\n                    data.gender = \"F\";\n                }\n                if (resp.birthday) {\n                    var byear = resp.birthday.split(\"/\").pop();\n                    if (byear && byear.length === 4) {\n                        data.byear = byear;\n                    }\n                }\n                if (resp.work && resp.work[0] && resp.work[0].employer && resp.work[0].employer.name) {\n                    data.organization = resp.work[0].employer.name;\n                }\n                //check if any custom keys to collect\n                if (custom) {\n                    data.custom = {};\n                    for (var i in custom) {\n                        var parts = custom[i].split(\".\");\n                        var get = resp;\n                        for (var j = 0; j < parts.length; j++) {\n                            get = get[parts[j]];\n                            if (typeof get === \"undefined\") {\n                                break;\n                            }\n                        }\n                        if (typeof get !== \"undefined\") {\n                            data.custom[i] = get;\n                        }\n                    }\n                }\n                Countly.user_details(data);\n            });\n        }\n    };\n    /**\n    * Opts out user of any metric tracking\n    **/\n    Countly.opt_out = function () {\n        Countly.ignore_visitor = true;\n        store(\"cly_ignore\", true);\n    };\n\n    /**\n    * Opts in user for tracking, if complies with other user ignore rules like bot useragent and prefetch settings\n    **/\n    Countly.opt_in = function () {\n        store(\"cly_ignore\", false);\n        Countly.ignore_visitor = false;\n        checkIgnore();\n        if (!Countly.ignore_visitor && !hasPulse) {\n            heartBeat();\n        }\n    };\n\n    /**\n    * Show specific widget popup by the widget id\n    * @param {string} id - id value of related feedback widget, you can get this value by click \"Copy ID\" button in row menu at \"Feedback widgets\" screen\n    */\n    Countly.show_feedback_popup = function(id) {\n        if (offlineMode) {\n            log(\"Cannot show feedback popup in offline mode\");\n        }\n        else {\n            sendXmlHttpRequest(Countly.url+ '/o/feedback/widget', {widget_id:id}, function(err, params, responseText){\n                if(err){\n                    log(\"Error occurred\", err);\n                }\n                try {\n                    // widget object\n                    var currentWidget = JSON.parse(responseText);     \n                    processWidget(currentWidget, false);   \n                } catch (JSONParseError) {\n                    log(\"JSON parse failed: \" + JSONParseError);\n                }\n            });\n        }\n    };\n    \n    /**\n    * Show feedback popup by passed widget ids array\n    * @param {object=} configuration - required - includes \"popups\" property as string array of widgets (\"widgets\" for old versions)\n    * example configuration: {\"popups\":[\"5b21581b967c4850a7818617\"]}\n    **/\n    Countly.enable_feedback = function(params){\n        if (offlineMode) {\n            log(\"Cannot enable feedback in offline mode\");\n        }\n        else {\n            // inject feedback styles\n            loadCSS(Countly.url + '/star-rating/stylesheets/countly-feedback-web.css');\n            // get enable widgets by app_key\n            // define xhr object\n            var enableWidgets = params.popups || params.widgets;\n    \n            if (enableWidgets.length > 0) {\n                document.body.insertAdjacentHTML('beforeend', '<div id=\"cfbg\"></div>');\n    \n                sendXmlHttpRequest(Countly.url + '/o/feedback/multiple-widgets-by-id', {widgets:JSON.stringify(enableWidgets)}, function(err, params, responseText){\n                    if(err){\n                        log(\"Errors occurred:\", err);\n                    }\n                    try {\n                        // widgets array\n                        var widgets = JSON.parse(responseText);    \n                        for (var i = 0; i < widgets.length; i++) {\n                            if (widgets[i].is_active === \"true\") {\n                                var target_devices = widgets[i].target_devices;\n                                var currentDevice = detect_device.device;\n                                // device match check\n                                if (target_devices[currentDevice]) {\n                                    // is hide sticker option selected?\n                                    widgets[i].hide_sticker = widgets[i].hide_sticker === \"true\" ? true : false;\n                                    // is target_page option provided as \"All\"?\n                                    if (widgets[i].target_page === \"all\" && !widgets[i].hide_sticker) {\n                                        processWidget(widgets[i], true);\n                                    }\n                                    // is target_page option provided as \"selected\"?\n                                    else {\n                                        var pages = widgets[i].target_pages;\n                                        for (var k = 0; k < pages.length; k++) {\n                                            if (pages[k] === window.location.pathname && !widgets[i].hide_sticker) {\n                                                processWidget(widgets[i], true);\n                                            }\n                                        }    \n                                    }\n                                }\n                            }\n                        }   \n                        \n                    } catch (JSONParseError) {\n                        log(\"JSON parse error: \" + JSONParseError);\n                    }\n                });\n            } else {\n                log(\"You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback\");\n            }\n        }\n    };\n    \n    /**\n    *  PRIVATE METHODS\n    **/\n    function checkIgnore(){\n        if (Countly.ignore_prefetch && typeof document.visibilityState !== \"undefined\" && document.visibilityState === \"prerender\") {\n            Countly.ignore_visitor = true;\n        }\n        if (Countly.ignore_bots && searchBotRE.test(navigator.userAgent)) {\n            Countly.ignore_visitor = true;\n        }\n    }\n    \n    function getMultiSelectValues(input){\n        var values = [];\n        if (typeof input.options !== \"undefined\") {\n            for (var j = 0; j < input.options.length; j++) {\n                if (input.options[j].selected) {\n                    values.push(input.options[j].value);\n                }\n            }\n        }\n        return values.join(\", \");\n    }\n    \n    function notifyLoaders(){\n        //notify load waiters\n        var i;\n        if (typeof Countly.onload !== \"undefined\" && Countly.onload.length > 0) {\n            for (i = 0; i < Countly.onload.length; i++) {\n                if (typeof Countly.onload[i] === \"function\") {\n                    Countly.onload[i]();\n                }\n            }\n            Countly.onload = [];\n        }\n    }\n    \n    function processWidget(currentWidget, hasSticker){\n        try {\n            // create wrapper div\n            var wrapper = document.createElement(\"div\");\n            wrapper.className = 'countly-iframe-wrapper';\n            wrapper.id = 'countly-iframe-wrapper-'+currentWidget._id;\n            // create close icon for iframe popup\n            var closeIcon = document.createElement(\"span\");\n            closeIcon.className = \"countly-feedback-close-icon\";\n            closeIcon.id = \"countly-feedback-close-icon-\"+currentWidget._id;\n            closeIcon.innerHTML = \"x\";\n            // create iframe \n            var iframe = document.createElement(\"iframe\");\n            iframe.name = \"countly-feedback-iframe\";\n            iframe.id = \"countly-feedback-iframe\";\n            iframe.src = Countly.url + \"/feedback?widget_id=\" + currentWidget._id + \"&app_key=\" + Countly.app_key + '&device_id=' + Countly.device_id + '&sdk_version=' + SDK_VERSION;\n            // inject them to dom\n            document.body.appendChild(wrapper);\n            wrapper.appendChild(closeIcon);\n            wrapper.appendChild(iframe);\n            add_event(document.getElementById('countly-feedback-close-icon-'+currentWidget._id), 'click', function(){\n                document.getElementById('countly-iframe-wrapper-'+currentWidget._id).style.display = \"none\";\n                document.getElementById('cfbg').style.display = \"none\";\n            });\n            if(hasSticker) {\n                var sticker = document.createElement(\"div\");\n                sticker.style.color = ((currentWidget.trigger_font_color < 7) ? '#'+currentWidget.trigger_font_color : currentWidget.trigger_font_color);\n                sticker.style.backgroundColor = ((currentWidget.trigger_bg_color.length < 7) ? '#'+currentWidget.trigger_bg_color : currentWidget.trigger_bg_color);\n                sticker.className = 'countly-feedback-sticker '+ currentWidget.trigger_position;\n                sticker.id = 'countly-feedback-sticker-'+currentWidget._id;\n                sticker.innerHTML = '<svg id=\"feedback-sticker-svg\" aria-hidden=\"true\" data-prefix=\"far\" data-icon=\"grin\" class=\"svg-inline--fa fa-grin fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 496 512\"><path id=\"smileyPathInStickerSvg\" fill=\"white\" d=\"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z\"></path></svg> ' + currentWidget.trigger_button_text;\n                document.body.appendChild(sticker);\n                var smileySvg = document.getElementById(\"smileyPathInStickerSvg\");\n                if(smileySvg) {\n                    smileySvg.style.fill = ((currentWidget.trigger_font_color < 7) ? '#'+currentWidget.trigger_font_color : currentWidget.trigger_font_color);\n                }\n                add_event(document.getElementById('countly-feedback-sticker-'+currentWidget._id), 'click', function(){\n                    document.getElementById('countly-iframe-wrapper-'+currentWidget._id).style.display = \"block\";\n                    document.getElementById('cfbg').style.display = \"block\";\n                });\n            }\n            else {\n                document.getElementById('countly-iframe-wrapper-'+currentWidget._id).style.display = \"block\";\n                document.getElementById('cfbg').style.display = \"block\";\n            }\n        } catch (e) {\n            log(\"Somethings went wrong while element injecting process: \" + e);\n        }\n    }\n    \n    function reportViewDuration() {\n        if (lastView) {\n            var segments = {\n                \"name\": lastView,\n                \"segment\": platform\n            };\n\n            //track pageview\n            if (Countly.check_consent(\"views\")) {\n                add_cly_events({\n                    \"key\": \"[CLY]_view\",\n                    \"dur\": (trackTime) ? getTimestamp() - lastViewTime : lastViewStoredDuration,\n                    \"segmentation\": segments\n                });\n            }\n            lastView = null;\n        }\n    }\n\n    function getLastView() {\n        return lastView;\n    }\n    \n    //extend session\n    function extendSession(){\n        if(useSessionCookie){\n            //if session expired, we should start a new one\n            var expire = store(\"cly_session\");\n            if (!expire || parseInt(expire) <= getTimestamp()) {\n                sessionStarted = false;\n                Countly.begin_session(!autoExtend);\n            }\n            store(\"cly_session\", getTimestamp() + (sessionCookieTimeout * 60));\n        }\n    }\n\n    //prepare request by adding basic info to it\n    function prepareRequest(request) {\n        request.app_key = Countly.app_key;\n        request.device_id = Countly.device_id;\n        request.sdk_name = SDK_NAME;\n        request.sdk_version = SDK_VERSION;\n        \n        if (Countly.check_consent(\"location\")) {\n            if (Countly.country_code) {\n                request.country_code = Countly.country_code;\n            }\n\n            if (Countly.city) {\n                request.city = Countly.city;\n            }\n\n            if (Countly.ip_address !== null) {\n                request.ip_address = Countly.ip_address;\n            }\n        }\n        else {\n            request.location = \"\";\n        }\n\n        request.timestamp = getMsTimestamp();\n\n        var date = new Date();\n        request.hour = date.getHours();\n        request.dow = date.getDay();\n    }\n    \n    //insert request to queue\n    function toRequestQueue(request) {\n        \n        if (Countly.ignore_visitor) {\n            return;\n        }\n\n        if (!Countly.app_key || !Countly.device_id) {\n            log(\"app_key or device_id is missing\");\n            return;\n        }\n        \n        prepareRequest(request);\n\n        if (requestQueue.length > queueSize) {\n            requestQueue.shift();\n        }\n\n        requestQueue.push(request);\n        store(\"cly_queue\", requestQueue, true);\n    }\n\n    //heart beat\n    function heartBeat() {\n        notifyLoaders();\n        \n        //ignore bots\n        if (Countly.test_mode || Countly.ignore_visitor) {\n            hasPulse = false;\n            return;\n        }\n\n        hasPulse = true;\n        var i = 0;\n        //process queue\n        if (typeof Countly.q !== \"undefined\" && Countly.q.length > 0) {\n            var req;\n            var q = Countly.q;\n            Countly.q = [];\n            for (i = 0; i < q.length; i++) {\n                req = q[i];\n                log(\"Processing queued call\", req);\n                if (typeof req === \"function\") {\n                    req();\n                }\n                else if ( Array.isArray( req ) && req.length > 0) {\n                    if (typeof Countly[req[0]] !== \"undefined\") {\n                        Countly[req[0]].apply(null, req.slice(1));\n                    }\n                    else {\n                        var userdata = req[0].replace(\"userData.\", \"\");\n                        if (typeof Countly.userData[userdata] !== \"undefined\") {\n                            Countly.userData[userdata].apply(null, req.slice(1));\n                        }\n                    }\n                }\n            }\n        }\n\n        //extend session if needed\n        if (sessionStarted && autoExtend && trackTime) {\n            var last = getTimestamp();\n            if (last - lastBeat > sessionUpdate) {\n                Countly.session_duration(last - lastBeat);\n                lastBeat = last;\n            }\n        }\n\n        //process event queue\n        if (eventQueue.length > 0) {\n            if (eventQueue.length <= maxEventBatch) {\n                toRequestQueue({ events: JSON.stringify(eventQueue) });\n                eventQueue = [];\n            }\n            else {\n                var events = eventQueue.splice(0, maxEventBatch);\n                toRequestQueue({ events: JSON.stringify(events) });\n            }\n            store(\"cly_event\", eventQueue);\n        }\n\n        //process request queue with event queue\n        if (!offlineMode && requestQueue.length > 0 && readyToProcess && getTimestamp() > failTimeout) {\n            readyToProcess = false;\n            var params = requestQueue.shift();\n            //check if any consent to sync\n            if (hasAnyProperties(syncConsents)) {\n                if (consentTimer) {\n                    clearTimeout(consentTimer);\n                    consentTimer = null;\n                }\n                params.consent = JSON.stringify(syncConsents);\n                syncConsents = {};\n            }\n            log(\"Processing request\", params);\n            store(\"cly_queue\", requestQueue, true);\n            sendXmlHttpRequest(Countly.url + apiPath, params, function(err, params){\n                log(\"Request Finished\", params, err);\n                if (err) {\n                    requestQueue.unshift(params);\n                    failTimeout = getTimestamp() + failTimeoutAmount;\n                }\n                store(\"cly_queue\", requestQueue, true);\n                readyToProcess = true;\n            });\n        }\n\n        setTimeout(heartBeat, beatInterval);\n    }\n\n    //get ID\n    function getId() {\n        return store(\"cly_id\") || generateUUID();\n    }\n\n    //generate UUID\n    function generateUUID() {\n        var d = new Date().getTime();\n        var uuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n            var r = (d + Math.random() * 16) % 16 | 0;\n            d = Math.floor(d / 16);\n            return (c === \"x\" ? r : (r & 0x3 | 0x8)).toString(16);\n        });\n        return uuid;\n    }\n    \n    function isUUID() {\n        return /[0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-4[0-9a-fA-F]{3}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12}/.test(Countly.device_id);\n    }\n\n    //get metrics of the browser\n    function getMetrics() {\n        var metrics = {};\n\n        //getting app version\n        metrics._app_version = Countly.app_version;\n        metrics._ua = navigator.userAgent;\n\n        //getting resolution\n        if (screen.width) {\n            var width = (screen.width) ? parseInt(screen.width) : 0;\n            var height = (screen.height) ? parseInt(screen.height) : 0;\n            if (width !== 0 && height !== 0) {\n                var iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);\n                if (iOS && window.devicePixelRatio) {\n                    //ios provides dips, need to multiply\n                    width = Math.round(width * window.devicePixelRatio);\n                    height = Math.round(height * window.devicePixelRatio);\n                }\n                else {\n                    if (Math.abs(window.orientation) === 90) {\n                        //we have landscape orientation\n                        //switch values for all except ios\n                        var temp = width;\n                        width = height;\n                        height = temp;\n                    }\n                }\n                metrics._resolution = \"\" + width + \"x\" + height;\n            }\n        }\n\n        //getting density ratio\n        if (window.devicePixelRatio) {\n            metrics._density = window.devicePixelRatio;\n        }\n\n        //getting locale\n        var locale = navigator.language || navigator.browserLanguage || navigator.systemLanguage || navigator.userLanguage;\n        if (typeof locale !== \"undefined\") {\n            metrics._locale = locale;\n        }\n\n        if (typeof document.referrer !== \"undefined\" && document.referrer.length) {\n            var matches = urlParseRE.exec(document.referrer);\n            //do not report referrers of current website\n            if (matches && matches[11] && matches[11] !== window.location.hostname) {\n                var ignoring = false;\n                if (ignoreReferrers && ignoreReferrers.length) {\n                    for (var k = 0; k < ignoreReferrers.length; k++) {\n                        try {\n                            var reg = new RegExp(ignoreReferrers[k]);\n                            if (reg.test(document.referrer)) {\n                                log(\"Ignored:\", document.referrer);\n                                ignoring = true;\n                                break;\n                            }\n                        }\n                        catch (ex) { log(\"Problem with regex\", ignoreReferrers[k]); }\n                    }\n                }\n                if (!ignoring) {\n                    metrics._store = document.referrer;\n                }\n            }\n        }\n\n        log(\"Got metrics\", metrics);\n        return metrics;\n    }\n\n    //log stuff\n    function log() {\n        if (Countly.debug && typeof console !== \"undefined\") {\n            if (arguments[1] && typeof arguments[1] == \"object\") {\n                arguments[1] = JSON.stringify(arguments[1]);\n            }\n            // eslint-disable-next-line no-console\n            console.log(Array.prototype.slice.call(arguments).join(\"\\n\"));\n        }\n    }\n\n    //get current timestamp\n    function getTimestamp() {\n        return Math.floor(new Date().getTime() / 1000);\n    }\n\n    //get unique timestamp in miliseconds\n    function getMsTimestamp() {\n        var ts = new Date().getTime();\n        if (lastMsTs >= ts) {\n            lastMsTs++;\n        }\n        else {\n            lastMsTs = ts;\n        }\n        return lastMsTs;\n    }\n    \n    function getConfig(key, ob, override) {\n        if(typeof ob[key] !== \"undefined\")\n        {return ob[key];}\n        if(typeof Countly[key] !== \"undefined\")\n        {return Countly[key];}\n        return override;\n    }\n\n    function recordError(err, nonfatal, segments) {\n        if (Countly.check_consent(\"crashes\") && err) {\n            segments = segments || crashSegments;\n            var error = \"\";\n            if (typeof err === \"object\") {\n                if (typeof err.stack !== \"undefined\") {\n                    error = err.stack;\n                }\n                else {\n                    if (typeof err.name !== \"undefined\") {\n                        error += err.name + \":\";\n                    }\n                    if (typeof err.message !== \"undefined\") {\n                        error += err.message + \"\\n\";\n                    }\n                    if (typeof err.fileName !== \"undefined\") {\n                        error += \"in \" + err.fileName + \"\\n\";\n                    }\n                    if (typeof err.lineNumber !== \"undefined\") {\n                        error += \"on \" + err.lineNumber;\n                    }\n                    if (typeof err.columnNumber !== \"undefined\") {\n                        error += \":\" + err.columnNumber;\n                    }\n                }\n            }\n            else {\n                error = err + \"\";\n            }\n            nonfatal = (nonfatal) ? true : false;\n            var metrics = getMetrics();\n            var ob = { _resolution: metrics._resolution, _error: error, _app_version: metrics._app_version, _run: getTimestamp() - startTime };\n\n            ob._not_os_specific = true;\n\n            var battery = navigator.battery || navigator.webkitBattery || navigator.mozBattery || navigator.msBattery;\n            if (battery) {\n                ob._bat = Math.floor(battery.level * 100);\n            }\n\n            if (typeof navigator.onLine !== \"undefined\") {\n                ob._online = (navigator.onLine) ? true : false;\n            }\n\n            ob._background = (document.hasFocus()) ? false : true;\n\n            if (crashLogs.length > 0) {\n                ob._logs = crashLogs.join(\"\\n\");\n            }\n            crashLogs = [];\n            \n            ob._nonfatal = nonfatal;\n\n            ob._view = (window.location.pathname || \"\") + (window.location.search || \"\") + (window.location.hash || \"\");\n\n            if (typeof segments !== \"undefined\") {\n                ob._custom = segments;\n            }\n\n            try {\n                var canvas = document.createElement(\"canvas\");\n                var gl = canvas.getContext(\"experimental-webgl\");\n                ob._opengl = gl.getParameter(gl.VERSION);\n            }\n            catch (ex) {\n                //silent error\n            }\n\n            toRequestQueue({ crash: JSON.stringify(ob) });\n        }\n    }\n\n    //sending xml HTTP request\n    function sendXmlHttpRequest(url, params, callback) {\n        try {\n            log(\"Sending XML HTTP request\");\n            var xhr = window.XMLHttpRequest ? new window.XMLHttpRequest() : window.ActiveXObject ? new window.ActiveXObject(\"Microsoft.XMLHTTP\") : null;\n            params = params || {};\n            var data = prepareParams(params);\n            var method = \"GET\";\n            if (Countly.force_post || data.length >= 2000) {\n                method = \"POST\";\n            }\n            if(method === \"GET\") {\n                xhr.open('GET', url + \"?\" + data, true);\n            } else {\n                xhr.open('POST', url, true);\n                xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n            }\n            // fallback on error\n            xhr.onreadystatechange = function () {\n                if (this.readyState === 4 && this.status >= 200 && this.status < 300) {\n                    if (typeof callback === 'function') { callback(false, params, this.responseText); }\n                } else if (this.readyState === 4) {\n                    log(\"Failed Server XML HTTP request\", this.status);\n                    if (typeof callback === \"function\") { callback(true, params); }\n                }\n            };\n            if (method === \"GET\") {\n                xhr.send();\n            }\n            else {\n                xhr.send(data);\n            }\n        } catch (e) {\n            // fallback\n            log(\"Failed XML HTTP request\", e);\n            if (typeof callback === \"function\") { callback(true, params); }\n        }\n    }\n\n    //convert JSON object to query params\n    function prepareParams(params) {\n        var str = [];\n        for (var i in params) {\n            str.push(i + \"=\" + encodeURIComponent(params[i]));\n        }\n        return str.join(\"&\");\n    }\n\n    //removing trailing slashes\n    function stripTrailingSlash(str) {\n        if (str.substr(str.length - 1) === \"/\") {\n            return str.substr(0, str.length - 1);\n        }\n        return str;\n    }\n\n    //retrieve only specific properties from object\n    function getProperties(orig, props) {\n        var ob = {};\n        var prop;\n        for (var i = 0; i < props.length; i++) {\n            prop = props[i];\n            if (typeof orig[prop] !== \"undefined\") {\n                ob[prop] = orig[prop];\n            }\n        }\n        return ob;\n    }\n\n    //get closest parent matching nodeName\n    if (!Element.prototype.closest) {\n        Element.prototype.closest = function (nodeName) {\n            var el = this;\n            nodeName = nodeName.toUpperCase();\n            while (el) {\n                if (el.nodeName.toUpperCase() === nodeName) {\n                    return el;\n                }\n                el = el.parentElement;\n            }\n        };\n    }\n\n    //add event\n    var add_event = function (element, type, listener) {\n        if (typeof element.addEventListener !== \"undefined\") {\n            element.addEventListener(type, listener, false);\n        }\n        else {\n            element.attachEvent(\"on\" + type, listener);\n        }\n    };\n\n    //get element that fired event\n    var get_event_target = function (event) {\n        if (!event) {\n            return window.event.srcElement;\n        }\n        else if (typeof event.target !== \"undefined\") {\n            return event.target;\n        }\n        else {\n            return event.srcElement;\n        }\n    };\n\n    // detect current device\n    var detect_device = (function() {\n        var b = navigator.userAgent.toLowerCase(),\n            a = function(a) {\n                if(a){\n                    b = (a+\"\").toLowerCase();\n                }\n                return /(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(b) ? \"tablet\" : /(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(b) ? \"phone\" : \"desktop\";\n            };\n        return {\n            device: a(),\n            detect: a,\n            isMobile: \"desktop\" !== a() ? !0 : !1,\n            userAgent: b\n        };\n    }());\n    \n    //get page coordinates\n    function get_page_coord(e) {\n        //checking if pageY and pageX is already available\n        if (typeof e.pageY == \"undefined\" &&\n            typeof e.clientX == \"number\" &&\n            document.documentElement) {\n            //if not, then add scrolling positions\n            e.pageX = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\n            e.pageY = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\n        }\n        //return e which now contains pageX and pageY attributes\n        return e;\n    }\n\n    function getDocHeight() {\n        var D = document;\n        return Math.max(\n            Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),\n            Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),\n            Math.max(D.body.clientHeight, D.documentElement.clientHeight)\n        );\n    }\n    \n    function getDocWidth() {\n        var D = document;\n        return Math.max(\n            Math.max(D.body.scrollWidth, D.documentElement.scrollWidth),\n            Math.max(D.body.offsetWidth, D.documentElement.offsetWidth),\n            Math.max(D.body.clientWidth, D.documentElement.clientWidth)\n        );\n    }\n\n    function getViewportHeight() {\n        var D = document;\n        return Math.min(\n            Math.min(D.body.clientHeight, D.documentElement.clientHeight),\n            Math.min(D.body.offsetHeight, D.documentElement.offsetHeight),\n            window.innerHeight\n        );\n    }\n\n    function setToken(token) {\n        store(\"cly_token\", token);\n    }\n\n    function getToken() {\n        var token = store(\"cly_token\");\n        store(\"cly_token\", null);\n        return token;\n    }\n\n    function hasAnyProperties(ob) {\n        if (ob) {\n            for (var prop in ob) {\n                if(Object.prototype.hasOwnProperty.call(ob, prop))\n                {return true;}\n            }\n        }\n        return false;\n    }\n\n    /**\n    * Simple localStorage with Cookie Fallback\n    * v.1.0.0\n    *\n    * USAGE:\n    * ----------------------------------------\n    * Set New / Modify:\n    *   store(\"my_key\", \"some_value\");\n    *\n    * Retrieve:\n    *   store(\"my_key\");\n    *\n    * Delete / Remove:\n    *   store(\"my_key\", null);\n    */\n\n    var store = function store(key, value, storageOnly) {\n        //apply namespace\n        key = Countly.namespace + key;\n        storageOnly = storageOnly || false;\n        var lsSupport = false,\n            data;\n\n        // Check for native support\n        lsSupport = true;\n        try {\n            if (typeof localStorage !== \"undefined\") {\n                localStorage.setItem(\"testLocal\", true);\n            }\n        }\n        catch (e) {\n            lsSupport = false;\n        }\n\n        // If value is detected, set new or modify store\n        if (typeof value !== \"undefined\" && value !== null) {\n            value = Countly.serialize(value);\n            // Set the store\n            if (lsSupport) { // Native support\n                localStorage.setItem(key, value);\n            } else if (!storageOnly) { // Use Cookie\n                createCookie(key, value, 30);\n            }\n        }\n\n        // No value supplied, return value\n        if (typeof value === \"undefined\") {\n            // Get value\n            if (lsSupport) { // Native support\n                data = localStorage.getItem(key);\n            } else if (!storageOnly) { // Use cookie \n                data = readCookie(key);\n            }\n\n            return Countly.deserialize(data);\n\n        }\n\n        // Null specified, remove store\n        if (value === null) {\n            if (lsSupport) { // Native support\n                localStorage.removeItem(key);\n            } else if (!storageOnly) { // Use cookie\n                createCookie(key, \"\", -1);\n            }\n        }\n\n        /**\n        * Creates new cookie or removes cookie with negative expiration\n        * @param  key       The key or identifier for the store\n        * @param  value     Contents of the store\n        * @param  exp       Expiration - creation defaults to 30 days\n        */\n\n        function createCookie(key, value, exp) {\n            var date = new Date();\n            date.setTime(date.getTime() + (exp * 24 * 60 * 60 * 1000));\n            var expires = \"; expires=\" + date.toGMTString();\n            document.cookie = key + \"=\" + value + expires + \"; path=/\";\n        }\n\n        /**\n        * Returns contents of cookie\n        * @param  key       The key or identifier for the store\n        */\n\n        function readCookie(key) {\n            var nameEQ = key + \"=\";\n            var ca = document.cookie.split(\";\");\n            for (var i = 0, max = ca.length; i < max; i++) {\n                var c = ca[i];\n                while (c.charAt(0) === \" \") {\n                    c = c.substring(1, c.length);\n                }\n                if (c.indexOf(nameEQ) === 0) {\n                    return c.substring(nameEQ.length, c.length);\n                }\n            }\n            return null;\n        }\n    };\n    \n    window.addEventListener('storage', function(e) {\n        var key = (e.key + \"\").replace(Countly.namespace, \"\");\n        \n        switch(key) {\n        //queue of requests\n        case \"cly_queue\":\n            requestQueue = Countly.deserialize(e.newValue);\n            break;\n            //queue of events\n        case \"cly_event\":\n            eventQueue = Countly.deserialize(e.newValue);\n            break;\n        case \"cly_remote_configs\":\n            remoteConfigs = Countly.deserialize(e.newValue);\n            break;\n        case \"cly_ignore\":\n            Countly.ignore_visitor = Countly.deserialize(e.newValue);\n            break;\n        case \"cly_id\":\n            Countly.device_id = Countly.deserialize(e.newValue);\n            break;\n        default:\n                // do nothing\n        }\n    });\n\n    //load external js files\n    function loadFile(tag, attr, type, src, data, callback) {\n        var fileref = document.createElement(tag),\n            loaded;\n        fileref.setAttribute(attr, type);\n        fileref.setAttribute(src, data);\n        if (callback) {\n            fileref.onreadystatechange = fileref.onload = function () {\n                if (!loaded) {\n                    callback();\n                }\n                loaded = true;\n            };\n        }\n        document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n    }\n    \n    //load external js files\n    function loadJS(js, callback) {\n        loadFile(\"script\", \"type\", \"text/javascript\", \"src\", js, callback);\n    }\n\n    //load external css files\n    function loadCSS(css, callback) {\n        loadFile(\"link\", \"rel\", \"stylesheet\", \"href\", css, callback);\n    }\n\n    function showLoader() {\n        var loader = document.getElementById(\"cly-loader\");\n        if (!loader) {\n            log(\"setting up loader\");\n            var css = \"#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}\" +\n                \"#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}\" +\n                \"@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}\",\n                head = document.head || document.getElementsByTagName(\"head\")[0],\n                style = document.createElement(\"style\");\n            style.type = \"text/css\";\n            if (style.styleSheet) {\n                style.styleSheet.cssText = css;\n            } else {\n                style.appendChild(document.createTextNode(css));\n            }\n            head.appendChild(style);\n            loader = document.createElement(\"div\");\n            loader.setAttribute(\"id\", \"cly-loader\");\n            document.body.appendChild(loader);\n        }\n        loader.style.display = \"block\";\n    }\n\n    function hideLoader() {\n        var loader = document.getElementById(\"cly-loader\");\n        if (loader) {\n            loader.style.display = \"none\";\n        }\n    }\n\n    function getEventQueue() {\n        return eventQueue;\n    }\n\n    function getRequestQueue() {\n        return requestQueue;\n    }\n    \n    /**\n    * Overwrite serialization function for extending SDK with encryption, etc\n    * @param {any} value - value to serialize\n    * @return {string} serialized value\n    **/\n    Countly.serialize = function(value) {\n        // Convert object values to JSON\n        if (typeof value === \"object\") {\n            value = JSON.stringify(value);\n        }\n        return value;\n    };\n    \n    /**\n    * Overwrite deserialization function for extending SDK with encryption, etc\n    * @param {string} data - value to deserialize\n    * @return {varies} deserialized value\n    **/\n    Countly.deserialize = function(data) {\n        // Try to parse JSON...\n        try {\n            data = JSON.parse(data);\n        }\n        catch (e) {\n            //it means data is not json, \n            //dont do anything\n        }\n\n        return data;\n    };\n    \n    /**\n    * Overwrite a way to retrieve view name\n    * @return {string} view name\n    **/\n    Countly.getViewName = function() {\n        return window.location.pathname;\n    };\n    \n    /**\n    * Overwrite a way to retrieve view url\n    * @return {string} view url\n    **/\n    Countly.getViewUrl = function() {\n        return window.location.pathname;\n    };\n\n    //expose internal methods for pluggable code to reuse them\n    Countly._internals = {\n        store: store,\n        getDocWidth: getDocWidth,\n        getDocHeight: getDocHeight,\n        getViewportHeight: getViewportHeight,\n        get_page_coord: get_page_coord,\n        get_event_target: get_event_target,\n        add_event: add_event,\n        getProperties: getProperties,\n        stripTrailingSlash: stripTrailingSlash,\n        prepareParams: prepareParams,\n        sendXmlHttpRequest: sendXmlHttpRequest,\n        recordError: recordError,\n        getMsTimestamp: getMsTimestamp,\n        getTimestamp: getTimestamp,\n        log: log,\n        getMetrics: getMetrics,\n        generateUUID: generateUUID,\n        isUUID: isUUID,\n        getId: getId,\n        heartBeat: heartBeat,\n        toRequestQueue: toRequestQueue,\n        reportViewDuration: reportViewDuration,\n        loadJS: loadJS,\n        loadCSS: loadCSS,\n        getLastView: getLastView,\n        setToken: setToken,\n        getToken: getToken,\n        showLoader: showLoader,\n        hideLoader: hideLoader,\n        add_cly_events:add_cly_events,\n        detect_device: detect_device,\n        getRequestQueue: getRequestQueue,\n        getEventQueue: getEventQueue,\n        clearQueue: function (){\n            requestQueue = [];\n            store(\"cly_queue\", []);\n            eventQueue = [];\n            store(\"cly_event\", []);\n        }\n    };\n\n    return Countly;\n}));"],"sourceRoot":""}